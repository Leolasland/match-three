Необходимо было задать также интерфейсы, а не только классы. Также не уходить глубоко в реализацию.